<!DOCTYPE html> <html class=no-js lang=en> <head> <meta charset=utf-8> <meta content='IE=edge' http-equiv=X-UA-Compatible> <title>Sass: Request for Comments: Nested Map Functions</title> <meta content='Syntactically Awesome Style Sheets' name=description> <meta content='width=device-width, initial-scale=1' name=viewport> <link href='/feed.xml' rel=alternate type='application/atom+xml'> <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,600|Source+Serif+Pro" rel=stylesheet /> <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" rel=stylesheet /> <link href="/assets/css/sass-27832f75.css" rel=stylesheet /> <noscript><link href="/assets/css/noscript-c6723936.css" rel=stylesheet /></noscript> <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535380-8']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-535380-14', 'sass-lang.com');
  ga('send', 'pageview');
</script> </head> <body class='blog blog_request-for-comments-nested-map-functions'> <!--[if lt IE 9]><p class=browserupgrade> You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security. </p><![endif]--> <header class=sl-r-banner itemscope=itemscope itemtype='http://schema.org/WPHeader' role=banner> <div class='sl-c-alert sl-c-alert--info' style='background: #000; padding: 3rem 0; text-align: left;'> <div class=sl-l-container> <h2 style='margin-top: 0;'>Black Lives Matter</h2> <p> Sass stands with the protesters against police violence. We encourage our users to <strong>get in the streets and join them if you can</strong>. </p> </div> </div> <div class=sl-c-pop-stripe></div> <div class=sl-l-container> <div class='sl-l-grid sl-l-grid--full sl-l-large-grid--fit sl-l-large-grid--center sl-l-large-grid--gutters'> <p class='sl-l-grid__column sl-r-banner__brand'> <a href="/"><img alt=Sass height=48 src="/assets/img/logos/logo-b6e1ef6e.svg"/> </a></p> <nav aria-label='Site navigation' class='sl-r-banner__navigation sl-l-grid__column sl-l-large-grid sl-l-large-grid__column--auto-size sl-c-list-horizontal-wrapper' itemscope=itemscope itemtype='http://schema.org/SiteNavigationElement' role=navigation> <ul> <li><a href="/install">Install</a></li> <li><a href="/guide">Learn Sass</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/documentation">Documentation</a></li> <li><a href="/community">Get Involved</a></li> <li><div id=docsearch></div></li> </ul> </nav> </div> </div> </header> <main class=content id=main-content itemprop=mainContentOfPage role=main> <h1 class=sl-l-container> Request for Comments: Nested Map&nbsp;Functions </h1> <div class='sl-background--white sl-l-container sl-l-section'><p class=sl-c-attribution>Posted 16 September 2020 by Natalie Weizenbaum</p> <p>As Sass libraries and design systems get more complex and have more users&nbsp;with different needs, they tend to develop the need to share and&nbsp;override configuration and design tokens. This configuration is often hierarchical,&nbsp;and ends up being represented as maps that contain maps that contain still&nbsp;more maps. Up until now, Sass&rsquo;s map functions haven&rsquo;t really made it easy to&nbsp;work with this sort of nested map structure. But that&rsquo;s changing with the&nbsp;latest language proposal, written by Sass core team member <a href="https://www.miriamsuzanne.com/">Miriam Suzanne</a>.</p> <p>This proposal expands the existing map functions and adds a few new ones to&nbsp;make working with nested maps much easier than it was before. It&rsquo;s based on&nbsp;helper functions that pop up in all sorts of Sass projects around the&nbsp;web, incorporating best practices back into the language&nbsp;itself.</p> <h2 id=the-functions> <a class=anchor href="#the-functions"><span class=visuallyhidden>The Functions permalink</span></a>The&nbsp;Functions</h2> <p>Here are the new and improved functions this proposal&nbsp;adds:</p> <h3 id=map-get-and-map-has-key> <a class=anchor href="#map-get-and-map-has-key"><span class=visuallyhidden>map.get() and map.has-key() permalink</span></a><code>map.get()</code> and&nbsp;<code>map.has-key()</code> </h3> <p>The <a href="https://sass-lang.com/documentation/modules/map#get"><code>map.get()</code></a> and <a href="https://sass-lang.com/documentation/modules/map#has-key"><code>map.has-key()</code></a> functions both now take any number&nbsp;of keys as arguments. Each key drills deeper into a nested map, allowing you&nbsp;to easily inspect nested values without needing to chain a bunch of function&nbsp;calls together.</p> <p>For example, let&rsquo;s take the following simplified configuration&nbsp;map:</p> <pre class="highlight scss"><code><span class="nv">$config</span><span class="p">:</span> <span class="p">(</span>
  <span class="s2">"colors"</span><span class="o">:</span> <span class="p">(</span>
    <span class="s2">"primary"</span><span class="o">:</span> <span class="no">red</span><span class="o">,</span>
    <span class="s2">"secondary"</span><span class="o">:</span> <span class="no">blue</span>
  <span class="p">)</span>
<span class="p">)</span>
</code></pre> <p>For this map, <code>map.get($config, &quot;colors&quot;, &quot;primary&quot;)</code> gets the value of&nbsp;the <code>&quot;colors&quot;</code> key (<code>(&quot;primary&quot;: red)</code>) then the value of the <code>&quot;primary&quot;</code> key&nbsp;and returns&nbsp;<code>red</code>.</p> <p>Similarly, <code>map.has-key($config, &quot;colors&quot;, &quot;primary&quot;)</code> returns <code>true</code>&nbsp;while <code>map.has-key($config, &quot;colors&quot;, &quot;tertiary&quot;)</code> returns&nbsp;<code>false</code>.</p> <h3 id=map-merge> <a class=anchor href="#map-merge"><span class=visuallyhidden>map.merge() permalink</span></a><code>map.merge()</code> </h3> <p>The <a href="https://sass-lang.com/documentation/modules/map#merge"><code>map.merge()</code></a> function can now be called as <code>map.merge($map1, $keys..., $map2)</code>. This will merge <code>$map2</code> with a child of <code>$map1</code> at the location&nbsp;given by the keys, updating the parent maps as it&nbsp;goes.</p> <p>For example, using the configuration map <a href="#map-get-and-map-has-key">defined above</a> <code>map.merge($config, &quot;colors&quot;, (&quot;primary&quot;: green))</code> will&nbsp;return</p> <pre class="highlight plaintext"><code>(
  "colors": (
    "primary": green,
    "secondary": blue
  )
)
</code></pre> <h3 id=map-set> <a class=anchor href="#map-set"><span class=visuallyhidden>map.set() permalink</span></a><code>map.set()</code> </h3> <p>The <code>map.set($map, $keys..., $value)</code> function is all-new. Although&nbsp;updating individual values in maps was always possible with <code>map.merge()</code>, we&rsquo;ve&nbsp;found that users get confused by the absence of a dedicated <code>set()</code> function.&nbsp;This function not only fills that role, but makes it possible to set values&nbsp;within nested maps as&nbsp;well.</p> <p>You can use <code>map.set()</code> for normal single-layer maps by just passing one&nbsp;key. For example, <code>map.set((&quot;wide&quot;: 200px, &quot;narrow&quot;: 70px), &quot;wide&quot;, 180px)</code>&nbsp;will return&nbsp;<code>(&quot;wide&quot;: 180px, &quot;narrow&quot;: 70px)</code>.</p> <p>But you can also use it for nested maps. For example, <code>map.set($config, &quot;colors&quot;, &quot;tertiary&quot;, yellow)</code> will&nbsp;return</p> <pre class="highlight plaintext"><code>(
  "colors": (
    "primary": red,
    "secondary": blue,
    "tertiary": yellow
  )
)
</code></pre> <h3 id=map-deep-remove> <a class=anchor href="#map-deep-remove"><span class=visuallyhidden>map.deep-remove() permalink</span></a><code>map.deep-remove()</code> </h3> <p>Because the existing <a href="https://sass-lang.com/documentation/modules/map#remove"><code>map.remove()</code></a> function already takes any number&nbsp;of arguments, we couldn&rsquo;t just update it to work with nested maps. Instead,&nbsp;we chose to add a new function just for nested maps, called <code>map.deep-remove($map, $keys...)</code>. This function removes the value at the final key in the list,&nbsp;and updates all the parent maps&nbsp;accordingly.</p> <p>For example, <code>map.deep-remove($config, &quot;colors&quot;, &quot;secondary&quot;)</code> will&nbsp;return <code>(&quot;colors&quot;: (&quot;primary&quot;: red))</code>.</p> <h3 id=map-deep-merge> <a class=anchor href="#map-deep-merge"><span class=visuallyhidden>map.deep-merge() permalink</span></a><code>map.deep-merge()</code> </h3> <p>The final new function may be the most exciting.&nbsp;<code>map.deep-merge($map1, $map2)</code> works just like <code>map.merge()</code>, except that any nested maps are <em>also</em>&nbsp;merged, including maps within those maps and so on. This makes it easy to combine&nbsp;two configuration maps that have the same structure without having to manually&nbsp;merge each level by&nbsp;hand.</p> <p>For example, <code>map.deep-merge($config, (&quot;colors&quot;: (&quot;secondary&quot;: teal)))</code>&nbsp;returns</p> <pre class="highlight plaintext"><code>(
  "colors": (
    "primary": red,
    "secondary": teal
  )
)
</code></pre> <h2 id=let-us-know-what-you-think> <a class=anchor href="#let-us-know-what-you-think"><span class=visuallyhidden>Let us know what you think! permalink</span></a>Let us know what you&nbsp;think!</h2> <p>If you&rsquo;re interested in learning more about this proposal, <a href="https://github.com/sass/sass/tree/main/accepted/nested-map-functions.md">read it in full</a>&nbsp;on GitHub. It&rsquo;s open for comments and revisions for the next month, so if&nbsp;you&rsquo;d like to see something change please <a href="https://github.com/sass/sass/issues/new">file an issue</a> and we can discuss&nbsp;it!</p> </div> <div class=sl-c-alert> <div aria-labelledby=release-nav class='sl-l-container sl-c-list-horizontal-wrapper'> <ul class=sl-l-grid--justify-center> <li id=release-nav> Current Releases: </li> <li> <span class=release-name><a href="/dart-sass">Dart Sass</a>&#32;<a href="https://github.com/sass/dart-sass/releases/tag/1.54.1">1.54.1</a></span> </li> <li> <span class=release-name><a href="/libsass">LibSass</a>&#32;<a href="https://github.com/sass/libsass/releases/tag/3.6.5">3.6.5</a></span> </li> <li> <span class=release-name><a href="/ruby-sass">Ruby Sass</a><span aria-label=coffin role=presentation> &#32; âš° </span></span> </li> <li class='sl-l-grid__column sl-l-large-grid__column--auto-size'> <a href="/implementation">Implementation Guide</a> </li> </ul> </div> </div> </main> <footer class='site-footer contentinfo' itemscope=itemscope itemtype='http://schema.org/WPFooter' role=contentinfo> <div class='sl-l-container sl-l-section'> <div class='sl-l-grid sl-l-grid--full sl-l-large-grid--fit sl-l-large-grid--center sl-l-large-grid--gutters'> <div class=sl-l-grid__column> <p>Sass &copy; 2006&ndash;2022 the Sass team, and numerous contributors. It is available for use and modification under the <a href="https://github.com/sass/dart-sass/blob/master/LICENSE">MIT&nbsp;License</a>.</p> <nav class=sl-c-list-horizontal-wrapper> <ul> <li><a href="https://github.com/sass">Sass on GitHub</a></li> <li><a href="https://github.com/sass/sass-site">Website Source Code</a></li> <li><a href="/styleguide">Style Guide</a></li> <li><a href="/community-guidelines">Community Guidelines</a></li> </ul> </nav> </div> <div class='sl-l-grid__column sl-l-large-grid__column--auto-size sl-l-large-grid--justify-right'> <a class=twitter-follow-button data-show-count=false data-size=large href='https://twitter.com/SassCSS'> Follow @SassCSS </a> <script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script> <script>
  docsearch({
    container: '#docsearch',
    appId: 'Q9MULQONSV',
    indexName: 'sass-lang',
    apiKey: '2ebc7881b79986f58dc2f424769bf3fc',
    transformItems: function(hits) {
      var domain = window.location.origin + "/";
      hits.forEach(function(hit) {
        if (!hit.url.startsWith(domain)) {
          hit.url = hit.url.replace(/^https?:\/\/[^\/]+\//, domain);
        }
      });
      return hits;
    },
  });
</script> <script src="/assets/js/sass-0849f18c.js"></script> </body> </html>