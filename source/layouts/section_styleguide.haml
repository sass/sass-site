= wrap_layout :has_navigation do
  = yield

  - if current_page.data.previous_page_url or current_page.data.next_page_url
    %footer
      %ul.pager
        - if current_page.data.previous_page_url
          %li.previous
            - if current_page.data.previous_page_url == "index"
              - previous = ""
            - else
              - previous = current_page.data.previous_page_url
            = link_to "/styleguide/" + previous do
              &larr;
              = current_page.data.previous_page_name
        - if current_page.data.next_page_url
          %li.next
            = link_to "/styleguide/" + current_page.data.next_page_url do
              = current_page.data.next_page_name
              &rarr;

  - content_for :navigation do
    - root_url = config[:host]

    %h3= link_to "Style Guide", "/styleguide"

    %ul.sl-c-list.sl-c-list--navigation
      - sitemap.resources.each do |page|
        - if page.url =~ /styleguide/
          - unless page.url =~ /assets/
            - unless page.data.title == "Style Guide"
              %li.sl-c-list--navigation__item
                = link_to "#{root_url}#{page.url.gsub!(/(\/)+$/,'')}" do
                  = page.data.title
