<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang=en lang=en> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"/> <title> Class: OrderedHash &mdash; Sass Documentation </title> <link rel=stylesheet href="css/style-03d6d7d0.css" charset=utf-8 /> <link rel=stylesheet href="../assets/css/docs-eb9372d5.css" charset=utf-8 /> <script charset=utf-8>
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!OrderedHash.html";
</script> <script charset=utf-8 src="js/jquery-89b1e99e.js"></script> <script charset=utf-8 src="js/app-760e64ba.js"></script> </head> <body> <div id=header> <div id=menu> <a href="_index.html">Index (O)</a> &raquo; <span class=title>OrderedHash</span> <div class=noframes><span class=title>(</span><a href="." target=_top>no frames</a><span class=title>)</span></div> </div> <div id=search> <a class=full_list_link id=class_list_link href="class_list.html"> Class List </a> <a class=full_list_link id=method_list_link href="method_list.html"> Method List </a> <a class=full_list_link id=file_list_link href="file_list.html"> File List </a> </div> <div class=clear></div> </div> <iframe id=search_frame></iframe> <div id=content><h1>Class: OrderedHash </h1> <dl class=box> <dt class=r1>Inherits:</dt> <dd class=r1> <span class=inheritName>Hash</span> <ul class=fullTree> <li>Object</li> <li class=next>Hash</li> <li class=next>OrderedHash</li> </ul> <a href="#" class=inheritanceTree>show all</a> </dd> <dt class="r2 last">Defined in:</dt> <dd class="r2 last">/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb</dd> </dl> <div class=clear></div> <h2>Overview</h2><div class=docstring> <div class=discussion> <p>This class was copied from an old version of ActiveSupport.</p> </div> </div> <div class=tags> </div> <h2> Class Method Summary <small>(<a href="#" class=summary_toggle>collapse</a>)</small> </h2> <ul class=summary> <li class="public "> <span class=summary_signature> <a href="#%5B%5D-class_method" title="[] (class method)">+ <strong>[]</strong>(*args) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> </ul> <h2> Instance Method Summary <small>(<a href="#" class=summary_toggle>collapse</a>)</small> </h2> <ul class=summary> <li class="public "> <span class=summary_signature> <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- <strong>[]=</strong>(key, value) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#clear-instance_method" title="#clear (instance method)">- <strong>clear</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#delete-instance_method" title="#delete (instance method)">- <strong>delete</strong>(key) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#delete_if-instance_method" title="#delete_if (instance method)">- <strong>delete_if</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#each-instance_method" title="#each (instance method)">- <strong>each</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#each_key-instance_method" title="#each_key (instance method)">- <strong>each_key</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#each_pair-instance_method" title="#each_pair (instance method)">- <strong>each_pair</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#each_value-instance_method" title="#each_value (instance method)">- <strong>each_value</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#initialize-instance_method" title="#initialize (instance method)">- (OrderedHash) <strong>initialize</strong>(*args) </a> </span> <span class="note title constructor">constructor</span> <span class=summary_desc><div class=inline> <p>In MRI the Hash class is core and written in C.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">- <strong>initialize_copy</strong>(other) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#inspect-instance_method" title="#inspect (instance method)">- <strong>inspect</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#invert-instance_method" title="#invert (instance method)">- <strong>invert</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#keys-instance_method" title="#keys (instance method)">- <strong>keys</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#merge-instance_method" title="#merge (instance method)">- <strong>merge</strong>(other_hash) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#merge%21-instance_method" title="#merge! (instance method)">- <strong>merge!</strong>(other_hash) </a> (also: #update) </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#reject-instance_method" title="#reject (instance method)">- <strong>reject</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#reject%21-instance_method" title="#reject! (instance method)">- <strong>reject!</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#replace-instance_method" title="#replace (instance method)">- <strong>replace</strong>(other) </a> </span> <span class=summary_desc><div class=inline> <p>When replacing with another hash, the initial order of our keys must come from the other hash – ordered or not.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#shift-instance_method" title="#shift (instance method)">- <strong>shift</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#to_a-instance_method" title="#to_a (instance method)">- <strong>to_a</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#to_hash-instance_method" title="#to_hash (instance method)">- <strong>to_hash</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#values-instance_method" title="#values (instance method)">- <strong>values</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> </ul> <div id=constructor_details class=method_details_list> <h2>Constructor Details</h2> <div class="method_details first"> <h3 class="signature first" id=initialize-instance_method> - (<tt><span class=object_link><a href="" title="OrderedHash (class)">OrderedHash</a></span></tt>) <strong>initialize</strong>(*args) </h3><div class=docstring> <div class=discussion> <p>In MRI the Hash class is core and written in C. In particular, methods are programmed with explicit C function calls and polymorphism is not honored.</p> <p>For example, []= is crucial in this implementation to maintain the @keys array but hash.c invokes rb_hash_aset() originally. This prevents method reuse through inheritance and forces us to reimplement stuff.</p> <p>For instance, we cannot use the inherited #merge! because albeit the algorithm itself would work, our []= is not being called at all by the C code.</p> </div> </div> <div class=tags> </div><table class=source_code> <tr> <td> <pre class=lines>


34
35
36
37</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 34</span>

def initialize(*args)
  super
  @keys = []
end</pre> </td> </tr> </table> </div> </div> <div id=class_method_details class=method_details_list> <h2>Class Method Details</h2> <div class="method_details first"> <h3 class="signature first" id="[]-class_method"> + <strong>[]</strong>(*args) </h3><table class=source_code> <tr> <td> <pre class=lines>


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 39</span>

def self.[](*args)
  ordered_hash = new

  if args.length == 1 &amp;&amp; args.first.is_a?(Array)
    args.first.each do |key_value_pair|
      next unless key_value_pair.is_a?(Array)
      ordered_hash[key_value_pair[0]] = key_value_pair[1]
    end

    return ordered_hash
  end

  unless args.size.even?
    raise ArgumentError.new(&quot;odd number of arguments for Hash&quot;)
  end

  args.each_with_index do |val, ind|
    next if ind.odd?
    ordered_hash[val] = args[ind + 1]
  end

  ordered_hash
end</pre> </td> </tr> </table> </div> </div> <div id=instance_method_details class=method_details_list> <h2>Instance Method Details</h2> <div class="method_details first"> <h3 class="signature first" id="[]=-instance_method"> - <strong>[]=</strong>(key, value) </h3><table class=source_code> <tr> <td> <pre class=lines>


69
70
71
72</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 69</span>

def []=(key, value)
  @keys &lt;&lt; key unless has_key?(key)
  super
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=clear-instance_method> - <strong>clear</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


140
141
142
143
144</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 140</span>

def clear
  super
  @keys.clear
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=delete-instance_method> - <strong>delete</strong>(key) </h3><table class=source_code> <tr> <td> <pre class=lines>


74
75
76
77
78
79
80</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 74</span>

def delete(key)
  if has_key? key
    index = @keys.index(key)
    @keys.delete_at index
  end
  super
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=delete_if-instance_method> - <strong>delete_if</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


82
83
84
85
86</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 82</span>

def delete_if
  super
  sync_keys!
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=each-instance_method> - <strong>each</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


126
127
128
129
130</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 126</span>

def each
  return to_enum(:each) unless block_given?
  @keys.each {|key| yield [key, self[key]]}
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=each_key-instance_method> - <strong>each_key</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


114
115
116
117
118</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 114</span>

def each_key
  return to_enum(:each_key) unless block_given?
  @keys.each {|key| yield key}
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=each_pair-instance_method> - <strong>each_pair</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


132
133
134
135
136</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 132</span>

def each_pair
  return to_enum(:each_pair) unless block_given?
  @keys.each {|key| yield key, self[key]}
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=each_value-instance_method> - <strong>each_value</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


120
121
122
123
124</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 120</span>

def each_value
  return to_enum(:each_value) unless block_given?
  @keys.each {|key| yield self[key]}
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=initialize_copy-instance_method> - <strong>initialize_copy</strong>(other) </h3><table class=source_code> <tr> <td> <pre class=lines>


63
64
65
66
67</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 63</span>

def initialize_copy(other)
  super
  # make a deep copy of keys
  @keys = other.keys
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=inspect-instance_method> - <strong>inspect</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


183
184
185</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 183</span>

def inspect
  &quot;#&lt;OrderedHash #{super}&gt;&quot;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=invert-instance_method> - <strong>invert</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


179
180
181</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 179</span>

def invert
  OrderedHash[to_a.map! {|key_value_pair| key_value_pair.reverse}]
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=keys-instance_method> - <strong>keys</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


98
99
100</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 98</span>

def keys
  @keys.dup
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=merge-instance_method> - <strong>merge</strong>(other_hash) </h3><table class=source_code> <tr> <td> <pre class=lines>


163
164
165
166
167
168
169</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 163</span>

def merge(other_hash)
  if block_given?
    dup.merge!(other_hash) {|k, v1, v2| yield k, v1, v2}
  else
    dup.merge!(other_hash)
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="merge!-instance_method"> - <strong>merge!</strong>(other_hash) <span class=aliases>Also known as: <span class=names><span id=update-instance_method>update</span></span> </span> </h3><table class=source_code> <tr> <td> <pre class=lines>


152
153
154
155
156
157
158
159</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 152</span>

def merge!(other_hash)
  if block_given?
    other_hash.each {|k, v| self[k] = key?(k) ? yield(k, self[k], v) : v}
  else
    other_hash.each {|k, v| self[k] = v}
  end
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=reject-instance_method> - <strong>reject</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


94
95
96</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 94</span>

def reject
  dup.reject! {|h, k| yield h, k}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="reject!-instance_method"> - <strong>reject!</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


88
89
90
91
92</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 88</span>

def reject!
  super
  sync_keys!
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=replace-instance_method> - <strong>replace</strong>(other) </h3><div class=docstring> <div class=discussion> <p>When replacing with another hash, the initial order of our keys must come from the other hash – ordered or not.</p> </div> </div> <div class=tags> </div><table class=source_code> <tr> <td> <pre class=lines>


173
174
175
176
177</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 173</span>

def replace(other)
  super
  @keys = other.keys
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=shift-instance_method> - <strong>shift</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


146
147
148
149
150</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 146</span>

def shift
  k = @keys.first
  v = delete(k)
  [k, v]
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=to_a-instance_method> - <strong>to_a</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


110
111
112</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 110</span>

def to_a
  @keys.map {|key| [key, self[key]]}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=to_hash-instance_method> - <strong>to_hash</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


106
107
108</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 106</span>

def to_hash
  self
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=values-instance_method> - <strong>values</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


102
103
104</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util/ordered_hash.rb', line 102</span>

def values
  @keys.map {|key| self[key]}
end</pre> </td> </tr> </table> </div> </div> </div> <div id=footer> Generated on Thu Feb 26 18:31:50 2015 by <a href="//yardoc.org" title="Yay! A Ruby Documentation Tool" target=_parent>yard</a> 0.8.7.4 (ruby-2.0.0). </div> </body> </html>