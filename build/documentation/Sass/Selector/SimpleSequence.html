<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang=en lang=en> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"/> <title> Class: Sass::Selector::SimpleSequence &mdash; Sass Documentation </title> <link rel=stylesheet href="../../css/style-03d6d7d0.css" charset=utf-8 /> <link rel=stylesheet href="../../../assets/css/docs-eb9372d5.css" charset=utf-8 /> <script charset=utf-8>
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Sass/Selector/SimpleSequence.html";
</script> <script charset=utf-8 src="../../js/jquery-89b1e99e.js"></script> <script charset=utf-8 src="../../js/app-760e64ba.js"></script> </head> <body> <div id=header> <div id=menu> <a href="../../_index.html">Index (S)</a> &raquo; <span class=title><span class=object_link><a href="../../Sass.html" title="Sass (module)">Sass</a></span></span> &raquo; <span class=title><span class=object_link><a href="../Selector.html" title="Sass::Selector (module)">Selector</a></span></span> &raquo; <span class=title>SimpleSequence</span> <div class=noframes><span class=title>(</span><a href="." target=_top>no frames</a><span class=title>)</span></div> </div> <div id=search> <a class=full_list_link id=class_list_link href="../../class_list.html"> Class List </a> <a class=full_list_link id=method_list_link href="../../method_list.html"> Method List </a> <a class=full_list_link id=file_list_link href="../../file_list.html"> File List </a> </div> <div class=clear></div> </div> <iframe id=search_frame></iframe> <div id=content><h1>Class: Sass::Selector::SimpleSequence </h1> <dl class=box> <dt class=r1>Inherits:</dt> <dd class=r1> <span class=inheritName><span class=object_link><a href="AbstractSequence.html" title="Sass::Selector::AbstractSequence (class)">AbstractSequence</a></span></span> <ul class=fullTree> <li>Object</li> <li class=next><span class=object_link><a href="AbstractSequence.html" title="Sass::Selector::AbstractSequence (class)">AbstractSequence</a></span></li> <li class=next>Sass::Selector::SimpleSequence</li> </ul> <a href="#" class=inheritanceTree>show all</a> </dd> <dt class="r2 last">Defined in:</dt> <dd class="r2 last">/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb</dd> </dl> <div class=clear></div> <h2>Overview</h2><div class=docstring> <div class=discussion> <p>A unseparated sequence of selectors that all apply to a single element. For example, <code>.foo#bar[attr=baz]</code> is a simple sequence of the selectors <code>.foo</code>, <code>#bar</code>, and <code>[attr=baz]</code>.</p> </div> </div> <div class=tags> </div> <h2>Instance Attribute Summary <small>(<a href="#" class=summary_toggle>collapse</a>)</small></h2> <ul class=summary> <li class="public "> <span class=summary_signature> <a href="#members-instance_method" title="#members (instance method)">- (Array&lt;Simple&gt;) <strong>members</strong> </a> </span> <span class=summary_desc><div class=inline> <p>The array of individual selectors.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#source_range-instance_method" title="#source_range (instance method)">- (Sass::Source::Range) <strong>source_range</strong> </a> </span> <span class=summary_desc><div class=inline> <p>This sequence source range.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#sources-instance_method" title="#sources (instance method)">- (Set&lt;Sequence&gt;) <strong>sources</strong> </a> </span> <span class=summary_desc><div class=inline> <p>The extending selectors that caused this selector sequence to be generated.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#subject%3D-instance_method" title="#subject= (instance method)">- <strong>subject</strong> </a> </span> <span class="note title writeonly">writeonly</span> <span class=summary_desc><div class=inline></div></span> </li> </ul> <h3 class=inherited>Attributes inherited from <span class=object_link><a href="AbstractSequence.html" title="Sass::Selector::AbstractSequence (class)">AbstractSequence</a></span></h3> <p class=inherited><span class=object_link><a href="AbstractSequence.html#filename-instance_method" title="Sass::Selector::AbstractSequence#filename (method)">#filename</a></span>, <span class=object_link><a href="AbstractSequence.html#line-instance_method" title="Sass::Selector::AbstractSequence#line (method)">#line</a></span></p> <h2> Instance Method Summary <small>(<a href="#" class=summary_toggle>collapse</a>)</small> </h2> <ul class=summary> <li class="public "> <span class=summary_signature> <a href="#base-instance_method" title="#base (instance method)">- (Element, ...) <strong>base</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns the element or universal selector in this sequence, if it exists.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#do_extend-instance_method" title="#do_extend (instance method)">- (Array&lt;Sequence&gt;) <strong>do_extend</strong>(extends, parent_directives, replace, seen) </a> </span> <span class=summary_desc><div class=inline> <p>Non-destructively extends this selector with the extensions specified in a hash (which should come from <span class=object_link><a href="../Tree/Visitors/Cssize.html" title="Sass::Tree::Visitors::Cssize (class)">Tree::Visitors::Cssize</a></span>).</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#initialize-instance_method" title="#initialize (instance method)">- (SimpleSequence) <strong>initialize</strong>(selectors, subject, source_range = nil) </a> </span> <span class="note title constructor">constructor</span> <span class=summary_desc><div class=inline> <p>A new instance of SimpleSequence.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#inspect-instance_method" title="#inspect (instance method)">- (String) <strong>inspect</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns a string representation of the sequence.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#pseudo_elements-instance_method" title="#pseudo_elements (instance method)">- <strong>pseudo_elements</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#resolve_parent_refs-instance_method" title="#resolve_parent_refs (instance method)">- (CommaSequence) <strong>resolve_parent_refs</strong>(super_cseq) </a> </span> <span class=summary_desc><div class=inline> <p>Resolves the <span class=object_link><a href="Parent.html" title="Sass::Selector::Parent (class)">Parent</a></span> selectors within this selector by replacing them with the given parent selector, handling commas appropriately.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#rest-instance_method" title="#rest (instance method)">- (Set&lt;Simple&gt;) <strong>rest</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns the non-base, non-pseudo-element selectors in this sequence.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#selector_pseudo_classes-instance_method" title="#selector_pseudo_classes (instance method)">- <strong>selector_pseudo_classes</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#subject%3F-instance_method" title="#subject? (instance method)">- (Boolean) <strong>subject?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this compound selector is the subject of the parent selector; that is, whether it is prepended with <code>$</code> and represents the actual element that will be selected.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#superselector%3F-instance_method" title="#superselector? (instance method)">- (Boolean) <strong>superselector?</strong>(their_sseq, parents = []) </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether or not this selector matches all elements that the given selector matches (as well as possibly more).</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#to_s-instance_method" title="#to_s (instance method)">- <strong>to_s</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#unify-instance_method" title="#unify (instance method)">- (SimpleSequence<sup>?</sup>) <strong>unify</strong>(other) </a> </span> <span class=summary_desc><div class=inline> <p>Unifies this selector with another <span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span>, returning another <code>SimpleSequence</code> that is a subselector of both input selectors.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#with_more_sources-instance_method" title="#with_more_sources (instance method)">- (SimpleSequence) <strong>with_more_sources</strong>(sources) </a> </span> <span class=summary_desc><div class=inline> <p>Return a copy of this simple sequence with <code>sources</code> merged into the <span class=object_link><a href="#sources-instance_method" title="Sass::Selector::SimpleSequence#sources (method)">#sources</a></span> set.</p> </div></span> </li> </ul> <h3 class=inherited>Methods inherited from <span class=object_link><a href="AbstractSequence.html" title="Sass::Selector::AbstractSequence (class)">AbstractSequence</a></span></h3> <p class=inherited><span class=object_link><a href="AbstractSequence.html#_specificity-instance_method" title="Sass::Selector::AbstractSequence#_specificity (method)">#_specificity</a></span>, <span class=object_link><a href="AbstractSequence.html#eql%3F-instance_method" title="Sass::Selector::AbstractSequence#eql? (method)">#eql?</a></span>, <span class=object_link><a href="AbstractSequence.html#has_placeholder%3F-instance_method" title="Sass::Selector::AbstractSequence#has_placeholder? (method)">#has_placeholder?</a></span>, <span class=object_link><a href="AbstractSequence.html#hash-instance_method" title="Sass::Selector::AbstractSequence#hash (method)">#hash</a></span>, <span class=object_link><a href="AbstractSequence.html#specificity-instance_method" title="Sass::Selector::AbstractSequence#specificity (method)">#specificity</a></span></p> <div id=constructor_details class=method_details_list> <h2>Constructor Details</h2> <div class="method_details first"> <h3 class="signature first" id=initialize-instance_method> - (<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>) <strong>initialize</strong>(selectors, subject, source_range = nil) </h3><div class=docstring> <div class=discussion> <p>Returns a new instance of SimpleSequence</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>selectors</span> <span class=type>(<tt>Array&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Simple</a></span>&gt;</tt>)</span> &mdash; <div class=inline> <p>See <span class=object_link><a href="#members-instance_method" title="Sass::Selector::SimpleSequence#members (method)">#members</a></span></p> </div> </li> <li> <span class=name>subject</span> <span class=type>(<tt>Boolean</tt>)</span> &mdash; <div class=inline> <p>See <span class=object_link><a href="#subject%3F-instance_method" title="Sass::Selector::SimpleSequence#subject? (method)">#subject?</a></span></p> </div> </li> <li> <span class=name>source_range</span> <span class=type>(<tt><span class=object_link><a href="../Source/Range.html" title="Sass::Source::Range (class)">Sass::Source::Range</a></span></tt>)</span> <em class=default>(defaults to: <tt>nil</tt>)</em> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


74
75
76
77
78
79</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 74</span>

def initialize(selectors, subject, source_range = nil)
  @members = selectors
  @subject = subject
  @sources = Set.new
  @source_range = source_range
end</pre> </td> </tr> </table> </div> </div> <div id=instance_attr_details class=attr_details> <h2>Instance Attribute Details</h2> <span id="members=-instance_method"></span> <div class="method_details first"> <h3 class="signature first" id=members-instance_method> - (<tt>Array&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Simple</a></span>&gt;</tt>) <strong>members</strong> </h3><div class=docstring> <div class=discussion> <p>The array of individual selectors.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Simple</a></span>&gt;</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


11
12
13</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 11</span>

def members
  @members
end</pre> </td> </tr> </table> </div> <span id="source_range=-instance_method"></span> <div class="method_details "> <h3 class="signature " id=source_range-instance_method> - (<tt><span class=object_link><a href="../Source/Range.html" title="Sass::Source::Range (class)">Sass::Source::Range</a></span></tt>) <strong>source_range</strong> </h3><div class=docstring> <div class=discussion> <p>This sequence source range.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt><span class=object_link><a href="../Source/Range.html" title="Sass::Source::Range (class)">Sass::Source::Range</a></span></tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


32
33
34</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 32</span>

def source_range
  @source_range
end</pre> </td> </tr> </table> </div> <span id="sources=-instance_method"></span> <div class="method_details "> <h3 class="signature " id=sources-instance_method> - (<tt>Set&lt;<span class=object_link><a href="Sequence.html" title="Sass::Selector::Sequence (class)">Sequence</a></span>&gt;</tt>) <strong>sources</strong> </h3><div class=docstring> <div class=discussion> <p>The extending selectors that caused this selector sequence to be generated. For example:</p> <pre class="code ruby"><code class="ruby">a.foo { ... }
b.bar {@extend a}
c.baz {@extend b}</code></pre> <p>The generated selector <code>b.foo.bar</code> has <code>{b.bar}</code> as its <code>sources</code> set, and the generated selector <code>c.foo.bar.baz</code> has <code>{b.bar, c.baz}</code> as its <code>sources</code> set.</p> <p>This is populated during the <span class=object_link><a href="Sequence.html#do_extend-instance_method" title="Sass::Selector::Sequence#do_extend (method)">Sass::Selector::Sequence#do_extend</a></span> process.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Set&lt;<span class=object_link><a href="Sequence.html" title="Sass::Selector::Sequence (class)">Sequence</a></span>&gt;</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


27
28
29</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 27</span>

def sources
  @sources
end</pre> </td> </tr> </table> </div> <span id=""></span> <div class="method_details "> <h3 class="signature " id="subject=-instance_method"> - <strong>subject=</strong>(value) <span class=extras>(writeonly)</span> </h3><div class=docstring> <div class=discussion> </div> </div> <div class=tags> <p class=tag_title>See Also:</p> <ul class=see> <li>Sass::Selector::SimpleSequence.\{\{#subject?}</li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


35
36
37</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 35</span>

def subject=(value)
  @subject = value
end</pre> </td> </tr> </table> </div> </div> <div id=instance_method_details class=method_details_list> <h2>Instance Method Details</h2> <div class="method_details first"> <h3 class="signature first" id=base-instance_method> - (<tt><span class=object_link><a href="Element.html" title="Sass::Selector::Element (class)">Element</a></span></tt>, ...) <strong>base</strong> </h3><div class=docstring> <div class=discussion> <p>Returns the element or universal selector in this sequence, if it exists.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt><span class=object_link><a href="Element.html" title="Sass::Selector::Element (class)">Element</a></span></tt>, <tt><span class=object_link><a href="Universal.html" title="Sass::Selector::Universal (class)">Universal</a></span></tt>, <tt>nil</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


41
42
43</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 41</span>

def base
  @base ||= (members.first if members.first.is_a?(Element) || members.first.is_a?(Universal))
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=do_extend-instance_method> - (<tt>Array&lt;<span class=object_link><a href="Sequence.html" title="Sass::Selector::Sequence (class)">Sequence</a></span>&gt;</tt>) <strong>do_extend</strong>(extends, parent_directives, replace, seen) </h3><div class=docstring> <div class=discussion> <p>Non-destructively extends this selector with the extensions specified in a hash (which should come from <span class=object_link><a href="../Tree/Visitors/Cssize.html" title="Sass::Tree::Visitors::Cssize (class)">Tree::Visitors::Cssize</a></span>).</p> <p>The extensions to perform on this selector</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>extends</span> <span class=type>(<tt>{<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Selector::Simple</a></span> =&gt; <span class=object_link><a href="../Tree/Visitors/Cssize/Extend.html" title="Sass::Tree::Visitors::Cssize::Extend (class)">Sass::Tree::Visitors::Cssize::Extend</a></span>}</tt>)</span> </li> <li> <span class=name>parent_directives</span> <span class=type>(<tt>Array&lt;<span class=object_link><a href="../Tree/DirectiveNode.html" title="Sass::Tree::DirectiveNode (class)">Sass::Tree::DirectiveNode</a></span>&gt;</tt>)</span> &mdash; <div class=inline> <p>The directives containing this selector.</p> </div> </li> <li> <span class=name>seen</span> <span class=type>(<tt>Set&lt;Array&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Selector::Simple</a></span>&gt;&gt;</tt>)</span> &mdash; <div class=inline> <p>The set of simple sequences that are currently being replaced.</p> </div> </li> <li> <span class=name>original</span> <span class=type>(<tt>Boolean</tt>)</span> &mdash; <div class=inline> <p>Whether this is the original selector being extended, as opposed to the result of a previous extension thatâ€™s being re-extended.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array&lt;<span class=object_link><a href="Sequence.html" title="Sass::Selector::Sequence (class)">Sequence</a></span>&gt;</tt>)</span> &mdash; <div class=inline> <p>A list of selectors generated by extending this selector with <code>extends</code>.</p> </div> </li> </ul> <p class=tag_title>See Also:</p> <ul class=see> <li><span class=object_link><a href="CommaSequence.html#do_extend-instance_method" title="Sass::Selector::CommaSequence#do_extend (method)">CommaSequence#do_extend</a></span></li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 157</span>

def do_extend(extends, parent_directives, replace, seen)
  seen_with_pseudo_selectors = seen.dup

  modified_original = false
  members = Sass::Util.enum_with_index(self.members).map do |sel, i|
    next sel unless sel.is_a?(Pseudo) &amp;&amp; sel.selector
    next sel if seen.include?([sel])
    extended = sel.selector.do_extend(extends, parent_directives, replace, seen, !:original)
    next sel if extended == sel.selector
    extended.members.reject! {|seq| seq.has_placeholder?}

    # For `:not()`, we usually want to get rid of any complex
    # selectors becuase that will cause the selector to fail to
    # parse on all browsers at time of writing. We can keep them
    # if either the original selector had a complex selector, or
    # the result of extending has only complex selectors,
    # because either way we aren&#39;t breaking anything that isn&#39;t
    # already broken.
    if sel.normalized_name == &#39;not&#39; &amp;&amp;
        (sel.selector.members.none? {|seq| seq.members.length &gt; 1} &amp;&amp;
         extended.members.any? {|seq| seq.members.length == 1})
      extended.members.reject! {|seq| seq.members.length &gt; 1}
    end

    modified_original = true
    result = sel.with_selector(extended)
    result.each {|new_sel| seen_with_pseudo_selectors &lt;&lt; [new_sel]}
    result
  end.flatten

  groups = Sass::Util.group_by_to_a(extends[members.to_set]) {|ex| ex.extender}
  groups.map! do |seq, group|
    sels = group.map {|e| e.target}.flatten
    # If A {@extend B} and C {...},
    # seq is A, sels is B, and self is C

    self_without_sel = Sass::Util.array_minus(members, sels)
    group.each {|e| e.result = :failed_to_unify unless e.result == :succeeded}
    unified = seq.members.last.unify(SimpleSequence.new(self_without_sel, subject?))
    next unless unified
    group.each {|e| e.result = :succeeded}
    group.each {|e| check_directives_match!(e, parent_directives)}
    new_seq = Sequence.new(seq.members[0...-1] + [unified])
    new_seq.add_sources!(sources + [seq])
    [sels, new_seq]
  end
  groups.compact!
  groups.map! do |sels, seq|
    next [] if seen.include?(sels)
    seq.do_extend(
      extends, parent_directives, !:replace, seen_with_pseudo_selectors + [sels], !:original)
  end
  groups.flatten!

  if modified_original || !replace || groups.empty?
    # First Law of Extend: the result of extending a selector should
    # (almost) always contain the base selector.
    #
    # See https://github.com/nex3/sass/issues/324.
    original = Sequence.new([SimpleSequence.new(members, @subject, source_range)])
    original.add_sources! sources
    groups.unshift original
  end
  groups.uniq!
  groups
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=inspect-instance_method> - (<tt>String</tt>) <strong>inspect</strong> </h3><div class=docstring> <div class=discussion> <p>Returns a string representation of the sequence. This is basically the selector string.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


298
299
300
301
302</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 298</span>

def inspect
  res = members.map {|m| m.inspect}.join
  res &lt;&lt; &#39;!&#39; if subject?
  res
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=pseudo_elements-instance_method> - <strong>pseudo_elements</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


45
46
47</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 45</span>

def pseudo_elements
  @pseudo_elements ||= members.select {|sel| sel.is_a?(Pseudo) &amp;&amp; sel.type == :element}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=resolve_parent_refs-instance_method> - (<tt><span class=object_link><a href="CommaSequence.html" title="Sass::Selector::CommaSequence (class)">CommaSequence</a></span></tt>) <strong>resolve_parent_refs</strong>(super_cseq) </h3><div class=docstring> <div class=discussion> <p>Resolves the <span class=object_link><a href="Parent.html" title="Sass::Selector::Parent (class)">Parent</a></span> selectors within this selector by replacing them with the given parent selector, handling commas appropriately.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>super_cseq</span> <span class=type>(<tt><span class=object_link><a href="CommaSequence.html" title="Sass::Selector::CommaSequence (class)">CommaSequence</a></span></tt>)</span> &mdash; <div class=inline> <p>The parent selector</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt><span class=object_link><a href="CommaSequence.html" title="Sass::Selector::CommaSequence (class)">CommaSequence</a></span></tt>)</span> &mdash; <div class=inline> <p>This selector, with parent references resolved</p> </div> </li> </ul> <p class=tag_title>Raises:</p> <ul class=raise> <li> <span class=type>(<tt><span class=object_link><a href="../SyntaxError.html" title="Sass::SyntaxError (class)">Sass::SyntaxError</a></span></tt>)</span> &mdash; <div class=inline> <p>If a parent selector is invalid</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 88</span>

def resolve_parent_refs(super_cseq)
  resolved_members = @members.map do |sel|
    next sel unless sel.is_a?(Pseudo) &amp;&amp; sel.selector
    sel.with_selector(sel.selector.resolve_parent_refs(super_cseq, !:implicit_parent))
  end.flatten

  # Parent selector only appears as the first selector in the sequence
  unless (parent = resolved_members.first).is_a?(Parent)
    return CommaSequence.new([Sequence.new([SimpleSequence.new(resolved_members, subject?)])])
  end

  return super_cseq if @members.size == 1 &amp;&amp; parent.suffix.nil?

  CommaSequence.new(super_cseq.members.map do |super_seq|
    members = super_seq.members.dup
    newline = members.pop if members.last == &quot;\n&quot;
    unless members.last.is_a?(SimpleSequence)
      raise Sass::SyntaxError.new(&quot;Invalid parent selector for \&quot;#{self}\&quot;: \&quot;&quot; +
        super_seq.to_s + &#39;&quot;&#39;)
    end

    parent_sub = members.last.members
    unless parent.suffix.nil?
      parent_sub = parent_sub.dup
      parent_sub[-1] = parent_sub.last.dup
      case parent_sub.last
      when Sass::Selector::Class, Sass::Selector::Id, Sass::Selector::Placeholder
        parent_sub[-1] = parent_sub.last.class.new(parent_sub.last.name + parent.suffix)
      when Sass::Selector::Element
        parent_sub[-1] = parent_sub.last.class.new(
          parent_sub.last.name + parent.suffix,
          parent_sub.last.namespace)
      when Sass::Selector::Pseudo
        if parent_sub.last.arg || parent_sub.last.selector
          raise Sass::SyntaxError.new(&quot;Invalid parent selector for \&quot;#{self}\&quot;: \&quot;&quot; +
            super_seq.to_s + &#39;&quot;&#39;)
        end
        parent_sub[-1] = Sass::Selector::Pseudo.new(
          parent_sub.last.type,
          parent_sub.last.name + parent.suffix,
          nil, nil)
      else
        raise Sass::SyntaxError.new(&quot;Invalid parent selector for \&quot;#{self}\&quot;: \&quot;&quot; +
          super_seq.to_s + &#39;&quot;&#39;)
      end
    end

    Sequence.new(members[0...-1] +
      [SimpleSequence.new(parent_sub + resolved_members[1..-1], subject?)] +
      [newline].compact)
    end)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=rest-instance_method> - (<tt>Set&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Simple</a></span>&gt;</tt>) <strong>rest</strong> </h3><div class=docstring> <div class=discussion> <p>Returns the non-base, non-pseudo-element selectors in this sequence.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Set&lt;<span class=object_link><a href="Simple.html" title="Sass::Selector::Simple (class)">Simple</a></span>&gt;</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


58
59
60</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 58</span>

def rest
  @rest ||= Set.new(members - [base] - pseudo_elements)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=selector_pseudo_classes-instance_method> - <strong>selector_pseudo_classes</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


49
50
51
52
53</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 49</span>

def selector_pseudo_classes
  @selector_pseudo_classes ||= members.
    select {|sel| sel.is_a?(Pseudo) &amp;&amp; sel.type == :class &amp;&amp; sel.selector}.
    group_by {|sel| sel.normalized_name}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="subject?-instance_method"> - (<tt>Boolean</tt>) <strong>subject?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this compound selector is the subject of the parent selector; that is, whether it is prepended with <code>$</code> and represents the actual element that will be selected.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


67
68
69</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 67</span>

def subject?
  @subject
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="superselector?-instance_method"> - (<tt>Boolean</tt>) <strong>superselector?</strong>(their_sseq, parents = []) </h3><div class=docstring> <div class=discussion> <p>Returns whether or not this selector matches all elements that the given selector matches (as well as possibly more).</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>(.foo).superselector?(.foo.bar) #=&gt; true
(.foo).superselector?(.bar) #=&gt; false</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>their_sseq</span> <span class=type>(<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>)</span> </li> <li> <span class=name>parents</span> <span class=type>(<tt>Array&lt;<span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span>, String&gt;</tt>)</span> <em class=default>(defaults to: <tt>[]</tt>)</em> &mdash; <div class=inline> <p>The parent selectors of <code>their_sseq</code>, if any.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 255</span>

def superselector?(their_sseq, parents = [])
  return false unless base.nil? || base.eql?(their_sseq.base)
  return false unless pseudo_elements.eql?(their_sseq.pseudo_elements)
  our_spcs = selector_pseudo_classes
  their_spcs = their_sseq.selector_pseudo_classes

  # Some psuedo-selectors can be subselectors of non-pseudo selectors.
  # Pull those out here so we can efficiently check against them below.
  their_subselector_pseudos = %w[matches any nth-child nth-last-child].
    map {|name| their_spcs[name] || []}.flatten

  # If `self`&#39;s non-pseudo simple selectors aren&#39;t a subset of `their_sseq`&#39;s,
  # it&#39;s definitely not a superselector. This also considers being matched
  # by `:matches` or `:any`.
  return false unless rest.all? do |our_sel|
    next true if our_sel.is_a?(Pseudo) &amp;&amp; our_sel.selector
    next true if their_sseq.rest.include?(our_sel)
    their_subselector_pseudos.any? do |their_pseudo|
      their_pseudo.selector.members.all? do |their_seq|
        next false unless their_seq.members.length == 1
        their_sseq = their_seq.members.first
        next false unless their_sseq.is_a?(SimpleSequence)
        their_sseq.rest.include?(our_sel)
      end
    end
  end

  our_spcs.all? do |name, pseudos|
    pseudos.all? {|pseudo| pseudo.superselector?(their_sseq, parents)}
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=to_s-instance_method> - <strong>to_s</strong> </h3><div class=docstring> <div class=discussion> </div> </div> <div class=tags> <p class=tag_title>See Also:</p> <ul class=see> <li><span class=object_link><a href="Simple.html#to_s-instance_method" title="Sass::Selector::Simple#to_s (method)">Sass::Selector::Simple#to_s</a></span></li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


288
289
290
291
292</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 288</span>

def to_s
  res = @members.join
  res &lt;&lt; &#39;!&#39; if subject?
  res
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=unify-instance_method> - (<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt><sup>?</sup>) <strong>unify</strong>(other) </h3><div class=docstring> <div class=discussion> <p>Unifies this selector with another <span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">Sass::Selector::SimpleSequence</a></span>, returning another <code>SimpleSequence</code> that is a subselector of both input selectors.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>other</span> <span class=type>(<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>, <tt>nil</tt>)</span> &mdash; <div class=inline> <p>A <span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">Sass::Selector::SimpleSequence</a></span> matching both <code>sels</code> and this selector, or <code>nil</code> if this is impossible (e.g. unifying <code>#foo</code> and <code>#bar</code>)</p> </div> </li> </ul> <p class=tag_title>Raises:</p> <ul class=raise> <li> <span class=type>(<tt><span class=object_link><a href="../SyntaxError.html" title="Sass::SyntaxError (class)">Sass::SyntaxError</a></span></tt>)</span> &mdash; <div class=inline> <p>If this selector cannot be unified. This will only ever occur when a dynamic selector, such as <span class=object_link><a href="Parent.html" title="Sass::Selector::Parent (class)">Parent</a></span> or Interpolation, is used in unification. Since these selectors should be resolved by the time extension and unification happen, this exception will only ever be raised as a result of programmer error</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


237
238
239
240
241
242
243
244</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 237</span>

def unify(other)
  sseq = members.inject(other.members) do |member, sel|
    return unless member
    sel.unify(member)
  end
  return unless sseq
  SimpleSequence.new(sseq, other.subject? || subject?)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=with_more_sources-instance_method> - (<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>) <strong>with_more_sources</strong>(sources) </h3><div class=docstring> <div class=discussion> <p>Return a copy of this simple sequence with <code>sources</code> merged into the <span class=object_link><a href="#sources-instance_method" title="Sass::Selector::SimpleSequence#sources (method)">#sources</a></span> set.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>sources</span> <span class=type>(<tt>Set&lt;<span class=object_link><a href="Sequence.html" title="Sass::Selector::Sequence (class)">Sequence</a></span>&gt;</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt><span class=object_link><a href="" title="Sass::Selector::SimpleSequence (class)">SimpleSequence</a></span></tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


309
310
311
312
313
314</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/selector/simple_sequence.rb', line 309</span>

def with_more_sources(sources)
  sseq = dup
  sseq.members = members.dup
  sseq.sources = self.sources | sources
  sseq
end</pre> </td> </tr> </table> </div> </div> </div> <div id=footer> Generated on Thu Feb 26 18:31:29 2015 by <a href="//yardoc.org" title="Yay! A Ruby Documentation Tool" target=_parent>yard</a> 0.8.7.4 (ruby-2.0.0). </div> </body> </html>